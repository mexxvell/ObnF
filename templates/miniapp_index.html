{% extends "layout_base.html" %}
{% block content %}
<div class="app-shell">
  <header class="app-header">
    <button id="burger" class="burger">☰</button>
    <h1>Городская Футбольная Лига</h1>
    <div id="user-mini"> </div>
  </header>

  <nav id="bottom-menu" class="bottom-menu">
    <button data-tab="home" class="tab-btn active">Главная</button>
    <button data-tab="nlo" class="tab-btn">НЛО 8×8</button>
    <button data-tab="pred" class="tab-btn">Прогнозы</button>
    <button data-tab="profile" class="tab-btn">Профиль</button>
    <button data-tab="support" class="tab-btn">Поддержка</button>
  </nav>

  <main id="main-content" class="main-content">
    <!-- Контент подгружается через AJAX (в шаблонах) -->
    <iframe id="page-frame" src="/miniapp/home" frameborder="0" style="width:100%;height:100vh"></iframe>
  </main>

  <!-- floating notification banner -->
  <div id="live-banner" class="live-banner hidden"></div>

  <!-- burger overlay menu -->
  <div id="side-menu" class="side-menu hidden">
    <ul>
      <li><a href="/miniapp/home" target="page-frame">Главная</a></li>
      <li><a href="/miniapp/matches" target="page-frame">Ближайшие матчи</a></li>
      <li><a href="/miniapp/profile" target="page-frame">Профиль</a></li>
      <li><a href="/miniapp/shop" target="page-frame">Магазин</a></li>
      <li><a href="/miniapp/admin" target="page-frame">Админ</a></li>
      <li><a href="#" id="close-burger">Закрыть</a></li>
    </ul>
  </div>
</div>

<script>
  // если есть реферальный параметр — запомним и отправим при init
  (function(){
    const params = new URLSearchParams(window.location.search);
    window.INIT_REF = params.get('ref') || null;
  })();
</script>
{% endblock %}
